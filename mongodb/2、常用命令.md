## Mongo 基础操作

- show dbs 查看服务器上的数据库列表

- db.help()   查看可在`db` 对象上使用的方法的帮助列表 
- 查看 方法的实现 在调用的时候不加后边的括号比如：db.updateUser
- show collections 查看在 database 下所有的集合
- db.collection.help() 查看 collection 相关的方法
- db.xx.xx.help() 可以查看相关的帮助手册

| 壳牌帮手                      | 等价的JavaScript                                             |
| :---------------------------- | :----------------------------------------------------------- |
| `show dbs`， `show databases` | `db.adminCommand('listDatabases') `                          |
| `use  `                       | `db = db.getSiblingDB('') `                                  |
| `show collections `           | `db.getCollectionNames() `                                   |
| `show users `                 | `db.getUsers() `                                             |
| `show roles `                 | `db.getRoles({showBuiltinRoles: true}) `                     |
| `show log  `                  | `db.adminCommand({ 'getLog' : '' }) `                        |
| `show logs `                  | `db.adminCommand({ 'getLog' : '*' }) `                       |
| `it `                         | `cursor = db.collection.find() if ( cursor.hasNext() ){   cursor.next(); }` |



## Mongo 常用类型

- 日期类型

  -  `Date()` 以字符串形式返回当前日期的方法 
  -  `new Date()`构造函数，`Date`使用`ISODate()`包装器返回对象 
  -  `ISODate()`构造函数，`Date`使用`ISODate()`包装器返回对象 

- 数字类型（在mongo中 默认将所有的数字识别为浮点数）

  -   `NumberLong("2090845886852")` 将数字包装为64位整数

  -  使用[`$inc`](https://mongodb.net.cn/manual/reference/operator/update/inc/#up._S_inc)来使包含`NumberLong`对象的字段的值增加**float** 

    ```
    db.collection.updateOne( { _id: 10 },
                          { $inc: { calc: 5 } } )
    ```

  - 使用 `NumberInt()` 将数字包装为32位整数
  - ` NumberDecimal() ` 主要针对高精度小数，支持到128位

- ObjectId 

  - ObjectId() 为每个document 生成一个唯一id值

使用 instanceof 与 typeof 来支持类型检查

- typeof 返回字段的类型
- insanceof 判断该类型是否是属于某种类型



## DB 常用方法介绍

### 用户管理方法

| [`db.auth()`](https://mongodb.net.cn/manual/reference/method/db.auth/#db.auth) | 向数据库验证用户。                                           |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| [`db.changeUserPassword()`](https://mongodb.net.cn/manual/reference/method/db.changeUserPassword/#db.changeUserPassword) | 更改现有用户的密码。                                         |
| [`db.createUser()`](https://mongodb.net.cn/manual/reference/method/db.createUser/#db.createUser) | 创建一个新用户。                                             |
| [`db.dropUser()`](https://mongodb.net.cn/manual/reference/method/db.dropUser/#db.dropUser) | 删除一个用户。                                               |
| [`db.dropAllUsers()`](https://mongodb.net.cn/manual/reference/method/db.dropAllUsers/#db.dropAllUsers) | 删除与数据库关联的所有用户。                                 |
| [`db.getUser()`](https://mongodb.net.cn/manual/reference/method/db.getUser/#db.getUser) | 返回有关指定用户的信息。                                     |
| [`db.getUsers()`](https://mongodb.net.cn/manual/reference/method/db.getUsers/#db.getUsers) | 返回有关与数据库关联的所有用户的信息。                       |
| [`db.grantRolesToUser()`](https://mongodb.net.cn/manual/reference/method/db.grantRolesToUser/#db.grantRolesToUser) | 向用户授予角色及其特权。                                     |
| [`db.removeUser()`](https://mongodb.net.cn/manual/reference/method/db.removeUser/#db.removeUser) | 不推荐使用。从数据库中删除用户。                             |
| [`db.revokeRolesFromUser()`](https://mongodb.net.cn/manual/reference/method/db.revokeRolesFromUser/#db.revokeRolesFromUser) | 从用户删除角色。                                             |
| [`db.updateUser()`](https://mongodb.net.cn/manual/reference/method/db.updateUser/#db.updateUser) | 更新用户数据。                                               |
| [`passwordPrompt()`](https://mongodb.net.cn/manual/reference/method/passwordPrompt/#passwordPrompt) | 提示输入密码，以作为在各种[`mongo`](https://mongodb.net.cn/manual/reference/program/mongo/#bin.mongo)Shell用户身份验证/管理方法中直接指定密码的替代方法。 |



### 角色管理方法

| [`db.createRole()`](https://mongodb.net.cn/manual/reference/method/db.createRole/#db.createRole) | 创建一个角色并指定其特权。           |
| ------------------------------------------------------------ | ------------------------------------ |
| [`db.dropRole()`](https://mongodb.net.cn/manual/reference/method/db.dropRole/#db.dropRole) | 删除用户定义的角色。                 |
| [`db.dropAllRoles()`](https://mongodb.net.cn/manual/reference/method/db.dropAllRoles/#db.dropAllRoles) | 删除与数据库关联的所有用户定义角色。 |
| [`db.getRole()`](https://mongodb.net.cn/manual/reference/method/db.getRole/#db.getRole) | 返回指定角色的信息。                 |
| [`db.getRoles()`](https://mongodb.net.cn/manual/reference/method/db.getRoles/#db.getRoles) | 返回数据库中所有用户定义角色的信息。 |
| [`db.grantPrivilegesToRole()`](https://mongodb.net.cn/manual/reference/method/db.grantPrivilegesToRole/#db.grantPrivilegesToRole) | 将特权分配给用户定义的角色。         |
| [`db.revokePrivilegesFromRole()`](https://mongodb.net.cn/manual/reference/method/db.revokePrivilegesFromRole/#db.revokePrivilegesFromRole) | 从用户定义的角色中删除指定的特权。   |
| [`db.grantRolesToRole()`](https://mongodb.net.cn/manual/reference/method/db.grantRolesToRole/#db.grantRolesToRole) | 指定用户定义角色从中继承特权的角色。 |
| [`db.revokeRolesFromRole()`](https://mongodb.net.cn/manual/reference/method/db.revokeRolesFromRole/#db.revokeRolesFromRole) | 从角色中删除继承的角色。             |
| [`db.updateRole()`](https://mongodb.net.cn/manual/reference/method/db.updateRole/#db.updateRole) | 更新用户定义的角色。                 |



## 集合

| 名称                                                         | 描述                                                         |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [`db.collection.aggregate()`](https://mongodb.net.cn/manual/reference/method/db.collection.aggregate/#db.collection.aggregate) | 提供对[聚合管道的](https://mongodb.net.cn/manual/core/aggregation-pipeline/)访问。 |
| [`db.collection.bulkWrite()`](https://mongodb.net.cn/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite) | 提供批量写入操作功能。                                       |
| [`db.collection.copyTo()`](https://mongodb.net.cn/manual/reference/method/db.collection.copyTo/#db.collection.copyTo) | 不推荐使用。当针对MongoDB 4.0或更早版本运行时，在集合之间复制数据。针对MongoDB 4.2或更高版本运行时不受支持。 |
| [`db.collection.count()`](https://mongodb.net.cn/manual/reference/method/db.collection.count/#db.collection.count) | 包装[`count`](https://mongodb.net.cn/manual/reference/command/count/#dbcmd.count)的集合或视图中返回的文档数量的计数。 |
| [`db.collection.countDocuments()`](https://mongodb.net.cn/manual/reference/method/db.collection.countDocuments/#db.collection.countDocuments) | [`$group`](https://mongodb.net.cn/manual/reference/operator/aggregation/group/#pipe._S_group)用[`$sum`](https://mongodb.net.cn/manual/reference/operator/aggregation/sum/#grp._S_sum) 表达式包装聚合阶段，以返回集合或视图中文档数量的计数。 |
| [`db.collection.estimatedDocumentCount()`](https://mongodb.net.cn/manual/reference/method/db.collection.estimatedDocumentCount/#db.collection.estimatedDocumentCount) | 包装[`count`](https://mongodb.net.cn/manual/reference/command/count/#dbcmd.count)以返回集合或视图中文档的大概数量。 |
| [`db.collection.createIndex()`](https://mongodb.net.cn/manual/reference/method/db.collection.createIndex/#db.collection.createIndex) | 如果索引不存在，则在集合上创建一个新索引；否则，该操作无效。 |
| [`db.collection.createIndexes()`](https://mongodb.net.cn/manual/reference/method/db.collection.createIndexes/#db.collection.createIndexes) | 在集合上建立一个或多个索引。                                 |
| [`db.collection.dataSize()`](https://mongodb.net.cn/manual/reference/method/db.collection.dataSize/#db.collection.dataSize) | 返回集合的大小。将[`size`](https://mongodb.net.cn/manual/reference/command/collStats/#collStats.size)字段包装在的输出中[`collStats`](https://mongodb.net.cn/manual/reference/command/collStats/#dbcmd.collStats)。 |
| [`db.collection.deleteOne()`](https://mongodb.net.cn/manual/reference/method/db.collection.deleteOne/#db.collection.deleteOne) | 删除集合中的单个文档。                                       |
| [`db.collection.deleteMany()`](https://mongodb.net.cn/manual/reference/method/db.collection.deleteMany/#db.collection.deleteMany) | 删除集合中的多个文档。                                       |
| [`db.collection.distinct()`](https://mongodb.net.cn/manual/reference/method/db.collection.distinct/#db.collection.distinct) | 返回具有指定字段不同值的文档数组。                           |
| [`db.collection.drop()`](https://mongodb.net.cn/manual/reference/method/db.collection.drop/#db.collection.drop) | 从数据库中删除指定的集合。                                   |
| [`db.collection.dropIndex()`](https://mongodb.net.cn/manual/reference/method/db.collection.dropIndex/#db.collection.dropIndex) | 删除集合上的指定索引。                                       |
| [`db.collection.dropIndexes()`](https://mongodb.net.cn/manual/reference/method/db.collection.dropIndexes/#db.collection.dropIndexes) | 删除集合上的所有索引。                                       |
| [`db.collection.ensureIndex()`](https://mongodb.net.cn/manual/reference/method/db.collection.ensureIndex/#db.collection.ensureIndex) | 不推荐使用。使用[`db.collection.createIndex()`](https://mongodb.net.cn/manual/reference/method/db.collection.createIndex/#db.collection.createIndex)。 |
| [`db.collection.explain()`](https://mongodb.net.cn/manual/reference/method/db.collection.explain/#db.collection.explain) | 返回有关各种方法的查询执行的信息。                           |
| [`db.collection.find()`](https://mongodb.net.cn/manual/reference/method/db.collection.find/#db.collection.find) | 对集合或视图执行查询并返回游标对象。                         |
| [`db.collection.findAndModify()`](https://mongodb.net.cn/manual/reference/method/db.collection.findAndModify/#db.collection.findAndModify) | 以原子方式修改并返回单个文档。                               |
| [`db.collection.findOne()`](https://mongodb.net.cn/manual/reference/method/db.collection.findOne/#db.collection.findOne) | 执行查询并返回单个文档。                                     |
| [`db.collection.findOneAndDelete()`](https://mongodb.net.cn/manual/reference/method/db.collection.findOneAndDelete/#db.collection.findOneAndDelete) | 查找单个文档并将其删除。                                     |
| [`db.collection.findOneAndReplace()`](https://mongodb.net.cn/manual/reference/method/db.collection.findOneAndReplace/#db.collection.findOneAndReplace) | 查找单个文档并将其替换。                                     |
| [`db.collection.findOneAndUpdate()`](https://mongodb.net.cn/manual/reference/method/db.collection.findOneAndUpdate/#db.collection.findOneAndUpdate) | 查找单个文档并进行更新。                                     |
| [`db.collection.getIndexes()`](https://mongodb.net.cn/manual/reference/method/db.collection.getIndexes/#db.collection.getIndexes) | 返回描述集合中现有索引的文档数组。                           |
| [`db.collection.getShardDistribution()`](https://mongodb.net.cn/manual/reference/method/db.collection.getShardDistribution/#db.collection.getShardDistribution) | 对于分片群集中的集合，[`db.collection.getShardDistribution()`](https://mongodb.net.cn/manual/reference/method/db.collection.getShardDistribution/#db.collection.getShardDistribution)报告[块](https://mongodb.net.cn/manual/reference/glossary/#term-chunk)分配的数据。 |
| [`db.collection.getShardVersion()`](https://mongodb.net.cn/manual/reference/method/db.collection.getShardVersion/#db.collection.getShardVersion) | 分片群集的内部诊断方法。                                     |
| [`db.collection.insert()`](https://mongodb.net.cn/manual/reference/method/db.collection.insert/#db.collection.insert) | 在集合中创建一个新文档。                                     |
| [`db.collection.insertOne()`](https://mongodb.net.cn/manual/reference/method/db.collection.insertOne/#db.collection.insertOne) | 在集合中插入新文档。                                         |
| [`db.collection.insertMany()`](https://mongodb.net.cn/manual/reference/method/db.collection.insertMany/#db.collection.insertMany) | 在集合中插入几个新文档。                                     |
| [`db.collection.isCapped()`](https://mongodb.net.cn/manual/reference/method/db.collection.isCapped/#db.collection.isCapped) | 报告集合是否为[上限集合](https://mongodb.net.cn/manual/reference/glossary/#term-capped-collection)。 |
| [`db.collection.latencyStats()`](https://mongodb.net.cn/manual/reference/method/db.collection.latencyStats/#db.collection.latencyStats) | 返回集合的延迟统计信息。                                     |
| [`db.collection.mapReduce()`](https://mongodb.net.cn/manual/reference/method/db.collection.mapReduce/#db.collection.mapReduce) | 执行map-reduce样式数据聚合。                                 |
| [`db.collection.reIndex()`](https://mongodb.net.cn/manual/reference/method/db.collection.reIndex/#db.collection.reIndex) | 重建集合上所有现有的索引。                                   |
| [`db.collection.remove()`](https://mongodb.net.cn/manual/reference/method/db.collection.remove/#db.collection.remove) | 从集合中删除文档。                                           |
| [`db.collection.renameCollection()`](https://mongodb.net.cn/manual/reference/method/db.collection.renameCollection/#db.collection.renameCollection) | 更改集合的名称。                                             |
| [`db.collection.replaceOne()`](https://mongodb.net.cn/manual/reference/method/db.collection.replaceOne/#db.collection.replaceOne) | 替换集合中的单个文档。                                       |
| [`db.collection.save()`](https://mongodb.net.cn/manual/reference/method/db.collection.save/#db.collection.save) | 插入新文档或更新集合中的现有文档。                           |
| [`db.collection.stats()`](https://mongodb.net.cn/manual/reference/method/db.collection.stats/#db.collection.stats) | 报告收集状态。在的周围提供包装器[`collStats`](https://mongodb.net.cn/manual/reference/command/collStats/#dbcmd.collStats)。 |
| [`db.collection.storageSize()`](https://mongodb.net.cn/manual/reference/method/db.collection.storageSize/#db.collection.storageSize) | 报告集合使用的总大小（以字节为单位）。提供围绕输出[`storageSize`](https://mongodb.net.cn/manual/reference/command/collStats/#collStats.storageSize)字段的包装[`collStats`](https://mongodb.net.cn/manual/reference/command/collStats/#dbcmd.collStats)。 |
| [`db.collection.totalIndexSize()`](https://mongodb.net.cn/manual/reference/method/db.collection.totalIndexSize/#db.collection.totalIndexSize) | 报告集合上的索引使用的总大小。提供围绕输出[`totalIndexSize`](https://mongodb.net.cn/manual/reference/command/collStats/#collStats.totalIndexSize)字段的包装[`collStats`](https://mongodb.net.cn/manual/reference/command/collStats/#dbcmd.collStats)。 |
| [`db.collection.totalSize()`](https://mongodb.net.cn/manual/reference/method/db.collection.totalSize/#db.collection.totalSize) | 报告集合的总大小，包括集合中所有文档和所有索引的大小。       |
| [`db.collection.update()`](https://mongodb.net.cn/manual/reference/method/db.collection.update/#db.collection.update) | 修改集合中的文档。                                           |
| [`db.collection.updateOne()`](https://mongodb.net.cn/manual/reference/method/db.collection.updateOne/#db.collection.updateOne) | 修改集合中的单个文档。                                       |
| [`db.collection.updateMany()`](https://mongodb.net.cn/manual/reference/method/db.collection.updateMany/#db.collection.updateMany) | 修改集合中的多个文档。                                       |
| [`db.collection.watch()`](https://mongodb.net.cn/manual/reference/method/db.collection.watch/#db.collection.watch) | 在集合上建立变更流。                                         |
| [`db.collection.validate()`](https://mongodb.net.cn/manual/reference/method/db.collection.validate/#db.collection.validate) | 对集合执行诊断操作。                                         |





## 游标

| 名称                                                         | 描述                                                         |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [`cursor.addOption()`](https://mongodb.net.cn/manual/reference/method/cursor.addOption/#cursor.addOption) | 添加特殊的有线协议标志，以修改查询的行为。”                  |
| [`cursor.allowPartialResults()`](https://mongodb.net.cn/manual/reference/method/cursor.allowPartialResults/#cursor.allowPartialResults) | [`db.collection.find()`](https://mongodb.net.cn/manual/reference/method/db.collection.find/#db.collection.find)如果一个或多个查询的分片不可用，则允许对分片集合进行的操作返回部分结果，而不是错误。 |
| [`cursor.batchSize()`](https://mongodb.net.cn/manual/reference/method/cursor.batchSize/#cursor.batchSize) | 控制MongoDB在单个网络消息中返回给客户端的文档数。            |
| [`cursor.close()`](https://mongodb.net.cn/manual/reference/method/cursor.close/#cursor.close) | 关闭游标并释放关联的服务器资源。                             |
| [`cursor.isClosed()`](https://mongodb.net.cn/manual/reference/method/cursor.isClosed/#cursor.isClosed) | 返回`true`游标是否关闭。                                     |
| [`cursor.collation()`](https://mongodb.net.cn/manual/reference/method/cursor.collation/#cursor.collation) | 指定由返回的游标的排序规则[`db.collection.find()`](https://mongodb.net.cn/manual/reference/method/db.collection.find/#db.collection.find)。 |
| [`cursor.comment()`](https://mongodb.net.cn/manual/reference/method/cursor.comment/#cursor.comment) | 在查询中附加注释，以允许在日志和system.profile集合中进行追溯。 |
| [`cursor.count()`](https://mongodb.net.cn/manual/reference/method/cursor.count/#cursor.count) | 修改光标以返回结果集中的文档数，而不是文档本身。             |
| [`cursor.explain()`](https://mongodb.net.cn/manual/reference/method/cursor.explain/#cursor.explain) | 报告有关游标的查询执行计划。                                 |
| [`cursor.forEach()`](https://mongodb.net.cn/manual/reference/method/cursor.forEach/#cursor.forEach) | 对光标中的每个文档应用JavaScript函数。                       |
| [`cursor.hasNext()`](https://mongodb.net.cn/manual/reference/method/cursor.hasNext/#cursor.hasNext) | 如果游标包含文档并且可以迭代，则返回true。                   |
| [`cursor.hint()`](https://mongodb.net.cn/manual/reference/method/cursor.hint/#cursor.hint) | 强制MongoDB对查询使用特定的索引。                            |
| [`cursor.isExhausted()`](https://mongodb.net.cn/manual/reference/method/cursor.isExhausted/#cursor.isExhausted) | 返回`true`如果游标处于关闭状态*，并*有剩余的批次没有对象。   |
| [`cursor.itcount()`](https://mongodb.net.cn/manual/reference/method/cursor.itcount/#cursor.itcount) | 通过获取和迭代结果集来计算游标客户端中的文档总数。           |
| [`cursor.limit()`](https://mongodb.net.cn/manual/reference/method/cursor.limit/#cursor.limit) | 限制游标结果集的大小。                                       |
| [`cursor.map()`](https://mongodb.net.cn/manual/reference/method/cursor.map/#cursor.map) | 将函数应用于游标中的每个文档，并在数组中收集返回值。         |
| [`cursor.max()`](https://mongodb.net.cn/manual/reference/method/cursor.max/#cursor.max) | 指定游标的排他上限索引。用于[`cursor.hint()`](https://mongodb.net.cn/manual/reference/method/cursor.hint/#cursor.hint) |
| [`cursor.maxTimeMS()`](https://mongodb.net.cn/manual/reference/method/cursor.maxTimeMS/#cursor.maxTimeMS) | 指定用于游标的处理操作的累积时间限制（以毫秒为单位）。       |
| [`cursor.min()`](https://mongodb.net.cn/manual/reference/method/cursor.min/#cursor.min) | 指定一个游标的下限索引。用于[`cursor.hint()`](https://mongodb.net.cn/manual/reference/method/cursor.hint/#cursor.hint) |
| [`cursor.next()`](https://mongodb.net.cn/manual/reference/method/cursor.next/#cursor.next) | 返回游标中的下一个文档。                                     |
| [`cursor.noCursorTimeout()`](https://mongodb.net.cn/manual/reference/method/cursor.noCursorTimeout/#cursor.noCursorTimeout) | 指示服务器避免在一段时间不活动后自动关闭游标。               |
| [`cursor.objsLeftInBatch()`](https://mongodb.net.cn/manual/reference/method/cursor.objsLeftInBatch/#cursor.objsLeftInBatch) | 返回当前游标批处理中剩余的文档数。                           |
| [`cursor.pretty()`](https://mongodb.net.cn/manual/reference/method/cursor.pretty/#cursor.pretty) | 配置光标以易于阅读的格式显示结果。                           |
| [`cursor.readConcern()`](https://mongodb.net.cn/manual/reference/method/cursor.readConcern/#cursor.readConcern) | 指定[读取关注](https://mongodb.net.cn/manual/reference/glossary/#term-read-concern)的[`find()`](https://mongodb.net.cn/manual/reference/method/db.collection.find/#db.collection.find)操作。 |
| [`cursor.readPref()`](https://mongodb.net.cn/manual/reference/method/cursor.readPref/#cursor.readPref) | 指定对游标的[读取首选项](https://mongodb.net.cn/manual/reference/glossary/#term-read-preference)，以控制客户端如何将查询定向到[副本集](https://mongodb.net.cn/manual/reference/glossary/#term-replica-set)。 |
| [`cursor.returnKey()`](https://mongodb.net.cn/manual/reference/method/cursor.returnKey/#cursor.returnKey) | 修改光标以返回索引键而不是文档。                             |
| [`cursor.showRecordId()`](https://mongodb.net.cn/manual/reference/method/cursor.showRecordId/#cursor.showRecordId) | 将内部存储引擎ID字段添加到光标返回的每个文档中。             |
| [`cursor.size()`](https://mongodb.net.cn/manual/reference/method/cursor.size/#cursor.size) | 应用[`skip()`](https://mongodb.net.cn/manual/reference/method/cursor.skip/#cursor.skip)和[`limit()`](https://mongodb.net.cn/manual/reference/method/cursor.limit/#cursor.limit)方法后，返回光标中文档的计数。 |
| [`cursor.skip()`](https://mongodb.net.cn/manual/reference/method/cursor.skip/#cursor.skip) | 返回一个游标，该游标仅在通过或跳过多个文档后才开始返回结果。 |
| [`cursor.sort()`](https://mongodb.net.cn/manual/reference/method/cursor.sort/#cursor.sort) | 返回根据排序规范排序的结果。                                 |
| [`cursor.tailable()`](https://mongodb.net.cn/manual/reference/method/cursor.tailable/#cursor.tailable) | 将光标标记为可尾。仅对有上限的集合上的光标有效。             |
| [`cursor.toArray()`](https://mongodb.net.cn/manual/reference/method/cursor.toArray/#cursor.toArray) | 返回一个数组，其中包含光标返回的所有文档。                   |



## 数据库

| 名称                                                         | 描述                                                         |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [`db.adminCommand()`](https://mongodb.net.cn/manual/reference/method/db.adminCommand/#db.adminCommand) | 针对`admin`数据库运行命令。                                  |
| [`db.aggregate()`](https://mongodb.net.cn/manual/reference/method/db.aggregate/#db.aggregate) | 运行不需要基础集合的管理/诊断管道。                          |
| [`db.cloneCollection()`](https://mongodb.net.cn/manual/reference/method/db.cloneCollection/#db.cloneCollection) | 直接在MongoDB实例之间复制数据。包装[`cloneCollection`](https://mongodb.net.cn/manual/reference/command/cloneCollection/#dbcmd.cloneCollection)。 |
| [`db.cloneDatabase()`](https://mongodb.net.cn/manual/reference/method/db.cloneDatabase/#db.cloneDatabase) | *不推荐使用*。当针对MongoDB 4.0或更早版本运行时，将数据库从远程主机复制到当前主机。针对MongoDB 4.2或更高版本运行时不受支持。 |
| [`db.commandHelp()`](https://mongodb.net.cn/manual/reference/method/db.commandHelp/#db.commandHelp) | 返回[数据库命令的](https://mongodb.net.cn/manual/reference/glossary/#term-database-command)帮助信息。 |
| [`db.copyDatabase()`](https://mongodb.net.cn/manual/reference/method/db.copyDatabase/#db.copyDatabase) | *不推荐使用*。针对MongoDB 4.0或更早版本运行时，将数据库复制到当前主机上的另一个数据库。针对MongoDB 4.2或更高版本运行时不受支持。 |
| [`db.createCollection()`](https://mongodb.net.cn/manual/reference/method/db.createCollection/#db.createCollection) | 创建一个新的集合或视图。通常用于创建上限集合。               |
| [`db.createView()`](https://mongodb.net.cn/manual/reference/method/db.createView/#db.createView) | 创建一个视图。                                               |
| [`db.currentOp()`](https://mongodb.net.cn/manual/reference/method/db.currentOp/#db.currentOp) | 报告当前正在进行的操作。                                     |
| [`db.dropDatabase()`](https://mongodb.net.cn/manual/reference/method/db.dropDatabase/#db.dropDatabase) | 删除当前数据库。                                             |
| [`db.eval()`](https://mongodb.net.cn/manual/reference/method/db.eval/#db.eval) | 不推荐使用。当针对MongoDB 4.0或更早版本运行时，传递JavaScript函数以进行服务器端JavaScript评估。针对MongoDB 4.2或更高版本运行时不受支持。 |
| [`db.fsyncLock()`](https://mongodb.net.cn/manual/reference/method/db.fsyncLock/#db.fsyncLock) | 将写刷新到磁盘并锁定数据库，以防止写操作并协助备份操作。包装[`fsync`](https://mongodb.net.cn/manual/reference/command/fsync/#dbcmd.fsync)。 |
| [`db.fsyncUnlock()`](https://mongodb.net.cn/manual/reference/method/db.fsyncUnlock/#db.fsyncUnlock) | 允许在以锁定的数据库上继续写入[`db.fsyncLock()`](https://mongodb.net.cn/manual/reference/method/db.fsyncLock/#db.fsyncLock)。 |
| [`db.getCollection()`](https://mongodb.net.cn/manual/reference/method/db.getCollection/#db.getCollection) | 返回一个集合或视图对象。用于访问名称在[`mongo`](https://mongodb.net.cn/manual/reference/program/mongo/#bin.mongo)Shell中无效的集合。 |
| [`db.getCollectionInfos()`](https://mongodb.net.cn/manual/reference/method/db.getCollectionInfos/#db.getCollectionInfos) | 返回当前数据库中所有集合和视图的集合信息。                   |
| [`db.getCollectionNames()`](https://mongodb.net.cn/manual/reference/method/db.getCollectionNames/#db.getCollectionNames) | 列出当前数据库中的所有集合和视图。                           |
| [`db.getLastError()`](https://mongodb.net.cn/manual/reference/method/db.getLastError/#db.getLastError) | 检查并返回上一个操作的状态。包装[`getLastError`](https://mongodb.net.cn/manual/reference/command/getLastError/#dbcmd.getLastError)。 |
| [`db.getLastErrorObj()`](https://mongodb.net.cn/manual/reference/method/db.getLastErrorObj/#db.getLastErrorObj) | 返回上一个操作的状态文档。包装[`getLastError`](https://mongodb.net.cn/manual/reference/command/getLastError/#dbcmd.getLastError)。 |
| [`db.getLogComponents()`](https://mongodb.net.cn/manual/reference/method/db.getLogComponents/#db.getLogComponents) | 返回日志消息的详细程度。                                     |
| [`db.getMongo()`](https://mongodb.net.cn/manual/reference/method/db.getMongo/#db.getMongo) | 返回[`Mongo()`](https://mongodb.net.cn/manual/reference/method/Mongo/#Mongo)当前连接的连接对象。 |
| [`db.getName()`](https://mongodb.net.cn/manual/reference/method/db.getName/#db.getName) | 返回当前数据库的名称。                                       |
| [`db.getProfilingLevel()`](https://mongodb.net.cn/manual/reference/method/db.getProfilingLevel/#db.getProfilingLevel) | 返回数据库操作的当前概要分析级别。                           |
| [`db.getProfilingStatus()`](https://mongodb.net.cn/manual/reference/method/db.getProfilingStatus/#db.getProfilingStatus) | 返回反映当前配置文件级别和配置文件阈值的文档。               |
| [`db.getReplicationInfo()`](https://mongodb.net.cn/manual/reference/method/db.getReplicationInfo/#db.getReplicationInfo) | 返回包含复制统计信息的文档。                                 |
| [`db.getSiblingDB()`](https://mongodb.net.cn/manual/reference/method/db.getSiblingDB/#db.getSiblingDB) | 提供对指定数据库的访问。                                     |
| [`db.help()`](https://mongodb.net.cn/manual/reference/method/db.help/#db.help) | 显示常见`db`对象方法的描述。                                 |
| [`db.hostInfo()`](https://mongodb.net.cn/manual/reference/method/db.hostInfo/#db.hostInfo) | 返回包含有关运行MongoDB的系统的信息的文档。包装纸[`hostInfo`](https://mongodb.net.cn/manual/reference/command/hostInfo/#dbcmd.hostInfo) |
| [`db.isMaster()`](https://mongodb.net.cn/manual/reference/method/db.isMaster/#db.isMaster) | 返回报告副本集状态的文档。                                   |
| [`db.killOp()`](https://mongodb.net.cn/manual/reference/method/db.killOp/#db.killOp) | 终止指定的操作。                                             |
| [`db.listCommands()`](https://mongodb.net.cn/manual/reference/method/db.listCommands/#db.listCommands) | 显示常见数据库命令的列表。                                   |
| [`db.logout()`](https://mongodb.net.cn/manual/reference/method/db.logout/#db.logout) | 结束已认证的会话。                                           |
| [`db.printCollectionStats()`](https://mongodb.net.cn/manual/reference/method/db.printCollectionStats/#db.printCollectionStats) | 打印每个集合的统计信息。包装[`db.collection.stats()`](https://mongodb.net.cn/manual/reference/method/db.collection.stats/#db.collection.stats)。 |
| [`db.printReplicationInfo()`](https://mongodb.net.cn/manual/reference/method/db.printReplicationInfo/#db.printReplicationInfo) | 从主数据库的角度打印副本集状态的报告。                       |
| [`db.printShardingStatus()`](https://mongodb.net.cn/manual/reference/method/db.printShardingStatus/#db.printShardingStatus) | 打印分片配置和块范围的报告。                                 |
| [`db.printSlaveReplicationInfo()`](https://mongodb.net.cn/manual/reference/method/db.printSlaveReplicationInfo/#db.printSlaveReplicationInfo) | 从第二副本的角度打印副本集状态的报告。                       |
| [`db.resetError()`](https://mongodb.net.cn/manual/reference/method/db.resetError/#db.resetError) | *不推荐使用*。重置上一个错误状态。                           |
| [`db.runCommand()`](https://mongodb.net.cn/manual/reference/method/db.runCommand/#db.runCommand) | 运行[数据库命令](https://mongodb.net.cn/manual/reference/command/)。 |
| [`db.serverBuildInfo()`](https://mongodb.net.cn/manual/reference/method/db.serverBuildInfo/#db.serverBuildInfo) | 返回显示[`mongod`](https://mongodb.net.cn/manual/reference/program/mongod/#bin.mongod)实例的编译参数的文档。包装`buildinfo`。 |
| [`db.serverCmdLineOpts()`](https://mongodb.net.cn/manual/reference/method/db.serverCmdLineOpts/#db.serverCmdLineOpts) | 返回一个文档，其中包含有关用于启动MongoDB实例的运行时的信息。包装[`getCmdLineOpts`](https://mongodb.net.cn/manual/reference/command/getCmdLineOpts/#dbcmd.getCmdLineOpts)。 |
| [`db.serverStatus()`](https://mongodb.net.cn/manual/reference/method/db.serverStatus/#db.serverStatus) | 返回一个提供数据库进程状态概述的文档。                       |
| [`db.setLogLevel()`](https://mongodb.net.cn/manual/reference/method/db.setLogLevel/#db.setLogLevel) | 设置单个日志消息的详细程度。                                 |
| [`db.setProfilingLevel()`](https://mongodb.net.cn/manual/reference/method/db.setProfilingLevel/#db.setProfilingLevel) | 修改当前数据库分析级别。                                     |
| [`db.shutdownServer()`](https://mongodb.net.cn/manual/reference/method/db.shutdownServer/#db.shutdownServer) | 干净安全地关闭电流[`mongod`](https://mongodb.net.cn/manual/reference/program/mongod/#bin.mongod)或[`mongos`](https://mongodb.net.cn/manual/reference/program/mongos/#bin.mongos)过程。 |
| [`db.stats()`](https://mongodb.net.cn/manual/reference/method/db.stats/#db.stats) | 返回报告当前数据库状态的文档。                               |
| [`db.version()`](https://mongodb.net.cn/manual/reference/method/db.version/#db.version) | 返回[`mongod`](https://mongodb.net.cn/manual/reference/program/mongod/#bin.mongod)实例的版本。 |
| [`db.watch()`](https://mongodb.net.cn/manual/reference/method/db.watch/#db.watch) | 打开[更改流游标](https://mongodb.net.cn/manual/changeStreams/#changestreams)，以供数据库报告其所有非`system`集合。不能在打开的`admin`，`local`或`config`数据库。 |



## 查询计划缓存

| 名称                                                         | 描述                                                         |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [`db.collection.getPlanCache()`](https://mongodb.net.cn/manual/reference/method/db.collection.getPlanCache/#db.collection.getPlanCache) | 返回一个接口，以访问查询计划缓存对象和集合的关联PlanCache方法。 |
| [`PlanCache.clear()`](https://mongodb.net.cn/manual/reference/method/PlanCache.clear/#PlanCache.clear) | 清除集合的所有缓存查询计划。可通过特定集合（即）的计划缓存对象访问`db.collection.getPlanCache().clear()`。 |
| [`PlanCache.clearPlansByQuery()`](https://mongodb.net.cn/manual/reference/method/PlanCache.clearPlansByQuery/#PlanCache.clearPlansByQuery) | 清除指定查询形状的缓存查询计划。可通过特定集合的计划缓存对象访问，即`db.collection.getPlanCache().clearPlansByQuery()` |
| [`PlanCache.getPlansByQuery()`](https://mongodb.net.cn/manual/reference/method/PlanCache.getPlansByQuery/#PlanCache.getPlansByQuery) | 显示指定查询形状的缓存查询计划。可通过特定集合（即）的计划缓存对象访问`db.collection.getPlanCache().getPlansByQuery()`。 |
| [`PlanCache.help()`](https://mongodb.net.cn/manual/reference/method/PlanCache.help/#PlanCache.help) | 显示可用于集合的查询计划缓存的方法。可通过特定集合（即）的计划缓存对象访问`db.collection.getPlanCache().help()`。 |
| [`PlanCache.listQueryShapes()`](https://mongodb.net.cn/manual/reference/method/PlanCache.listQueryShapes/#PlanCache.listQueryShapes) | 显示存在缓存的查询计划的查询形状。可通过特定集合（即）的计划缓存对象访问`db.collection.getPlanCache().listQueryShapes()`。 |



## 批量写操作

| 名称                                                         | 描述                                                         |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [`db.collection.initializeOrderedBulkOp()`](https://mongodb.net.cn/manual/reference/method/db.collection.initializeOrderedBulkOp/#db.collection.initializeOrderedBulkOp) | 初始化[`Bulk()`](https://mongodb.net.cn/manual/reference/method/Bulk/#Bulk)操作构建器以获取操作的有序列表。 |
| [`db.collection.initializeUnorderedBulkOp()`](https://mongodb.net.cn/manual/reference/method/db.collection.initializeUnorderedBulkOp/#db.collection.initializeUnorderedBulkOp) | 初始化[`Bulk()`](https://mongodb.net.cn/manual/reference/method/Bulk/#Bulk)操作构建器以获取无序的操作列表。 |
| [`Bulk()`](https://mongodb.net.cn/manual/reference/method/Bulk/#Bulk) | 批量操作生成器。                                             |
| [`Bulk.execute()`](https://mongodb.net.cn/manual/reference/method/Bulk.execute/#Bulk.execute) | 批量执行操作列表。                                           |
| [`Bulk.find()`](https://mongodb.net.cn/manual/reference/method/Bulk.find/#Bulk.find) | 指定更新或删除操作的查询条件。                               |
| [`Bulk.find.arrayFilters()`](https://mongodb.net.cn/manual/reference/method/Bulk.find.arrayFilters/#Bulk.find.arrayFilters) | 指定用于确定要为`update`或`updateOne`操作更新数组中哪些元素的过滤器。 |
| [`Bulk.find.collation()`](https://mongodb.net.cn/manual/reference/method/Bulk.find.collation/#Bulk.find.collation) | 指定查询条件的[排序规则](https://mongodb.net.cn/manual/reference/bson-type-comparison-order/#collation)。 |
| [`Bulk.find.hint()`](https://mongodb.net.cn/manual/reference/method/Bulk.find.hint/#Bulk.find.hint) | 指定用于更新/替换操作的索引。                                |
| [`Bulk.find.remove()`](https://mongodb.net.cn/manual/reference/method/Bulk.find.remove/#Bulk.find.remove) | 将多文档删除操作添加到操作列表中。                           |
| [`Bulk.find.removeOne()`](https://mongodb.net.cn/manual/reference/method/Bulk.find.removeOne/#Bulk.find.removeOne) | 将单个文档删除操作添加到操作列表中。                         |
| [`Bulk.find.replaceOne()`](https://mongodb.net.cn/manual/reference/method/Bulk.find.replaceOne/#Bulk.find.replaceOne) | 将单个文档替换操作添加到操作列表中。                         |
| [`Bulk.find.updateOne()`](https://mongodb.net.cn/manual/reference/method/Bulk.find.updateOne/#Bulk.find.updateOne) | 将单个文档更新操作添加到操作列表中。                         |
| [`Bulk.find.update()`](https://mongodb.net.cn/manual/reference/method/Bulk.find.update/#Bulk.find.update) | 将`multi`更新操作添加到操作列表中。                          |
| [`Bulk.find.upsert()`](https://mongodb.net.cn/manual/reference/method/Bulk.find.upsert/#Bulk.find.upsert) | 指定更新操作。`upsert: true`                                 |
| [`Bulk.getOperations()`](https://mongodb.net.cn/manual/reference/method/Bulk.getOperations/#Bulk.getOperations) | 返回在[`Bulk()`](https://mongodb.net.cn/manual/reference/method/Bulk/#Bulk)操作对象中执行的写操作数组。 |
| [`Bulk.insert()`](https://mongodb.net.cn/manual/reference/method/Bulk.insert/#Bulk.insert) | 将插入操作添加到操作列表中。                                 |
| [`Bulk.tojson()`](https://mongodb.net.cn/manual/reference/method/Bulk.tojson/#Bulk.tojson) | 返回一个JSON文档，其中包含[`Bulk()`](https://mongodb.net.cn/manual/reference/method/Bulk/#Bulk)操作对象中的操作和批处理的数量。 |
| [`Bulk.toString()`](https://mongodb.net.cn/manual/reference/method/Bulk.toString/#Bulk.toString) | 返回                                                         |



## 复制方法

| 名称                                                         | 描述                                                         |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [`rs.add()`](https://mongodb.net.cn/manual/reference/method/rs.add/#rs.add) | 将成员添加到副本集。                                         |
| [`rs.addArb()`](https://mongodb.net.cn/manual/reference/method/rs.addArb/#rs.addArb) | 将[仲裁器](https://mongodb.net.cn/manual/reference/glossary/#term-arbiter)添加到副本集。 |
| [`rs.conf()`](https://mongodb.net.cn/manual/reference/method/rs.conf/#rs.conf) | 返回副本集配置文档。                                         |
| [`rs.freeze()`](https://mongodb.net.cn/manual/reference/method/rs.freeze/#rs.freeze) | 阻止当前成员在一段时间内寻求选举为主。                       |
| [`rs.help()`](https://mongodb.net.cn/manual/reference/method/rs.help/#rs.help) | 返回[副本集](https://mongodb.net.cn/manual/reference/glossary/#term-replica-set)功能的基本帮助文本。 |
| [`rs.initiate()`](https://mongodb.net.cn/manual/reference/method/rs.initiate/#rs.initiate) | 初始化新的副本集。                                           |
| [`rs.printReplicationInfo()`](https://mongodb.net.cn/manual/reference/method/rs.printReplicationInfo/#rs.printReplicationInfo) | 从主数据库的角度打印副本集状态的报告。                       |
| [`rs.printSlaveReplicationInfo()`](https://mongodb.net.cn/manual/reference/method/rs.printSlaveReplicationInfo/#rs.printSlaveReplicationInfo) | 从第二副本的角度打印副本集状态的报告。                       |
| [`rs.reconfig()`](https://mongodb.net.cn/manual/reference/method/rs.reconfig/#rs.reconfig) | 通过应用新的副本集配置对象来重新配置副本集。                 |
| [`rs.remove()`](https://mongodb.net.cn/manual/reference/method/rs.remove/#rs.remove) | 从副本集中删除成员。                                         |
| [`rs.slaveOk()`](https://mongodb.net.cn/manual/reference/method/rs.slaveOk/#rs.slaveOk) | 设置`slaveOk`当前连接的属性。不推荐使用。使用[`readPref()`](https://mongodb.net.cn/manual/reference/method/cursor.readPref/#cursor.readPref)和[`Mongo.setReadPref()`](https://mongodb.net.cn/manual/reference/method/Mongo.setReadPref/#Mongo.setReadPref)设置[读取首选项](https://mongodb.net.cn/manual/reference/glossary/#term-read-preference)。 |
| [`rs.status()`](https://mongodb.net.cn/manual/reference/method/rs.status/#rs.status) | 返回包含有关副本集状态信息的文档。                           |
| [`rs.stepDown()`](https://mongodb.net.cn/manual/reference/method/rs.stepDown/#rs.stepDown) | 使当前的[主要成员](https://mongodb.net.cn/manual/reference/glossary/#term-primary)成为迫使[选举](https://mongodb.net.cn/manual/reference/glossary/#term-election)的次要成员。 |
| [`rs.syncFrom()`](https://mongodb.net.cn/manual/reference/method/rs.syncFrom/#rs.syncFrom) | 设置此副本集成员将从其进行同步的成员，从而覆盖默认的同步目标选择逻辑。 |



## 分片方法

| 名称                                                         | 描述                                                         |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [`sh.addShard()`](https://mongodb.net.cn/manual/reference/method/sh.addShard/#sh.addShard) | 添加一个[碎片](https://mongodb.net.cn/manual/reference/glossary/#term-shard)，以分片集群。 |
| [`sh.addShardTag()`](https://mongodb.net.cn/manual/reference/method/sh.addShardTag/#sh.addShardTag) | 在MongoDB 3.4中，此方法别名为[`sh.addShardToZone()`](https://mongodb.net.cn/manual/reference/method/sh.addShardToZone/#sh.addShardToZone)。 |
| [`sh.addShardToZone()`](https://mongodb.net.cn/manual/reference/method/sh.addShardToZone/#sh.addShardToZone) | 将分片与区域关联。支持在分片群集中配置[区域](https://mongodb.net.cn/manual/core/zone-sharding/#zone-sharding)。 |
| [`sh.addTagRange()`](https://mongodb.net.cn/manual/reference/method/sh.addTagRange/#sh.addTagRange) | 在MongoDB 3.4中，此方法别名为[`sh.updateZoneKeyRange()`](https://mongodb.net.cn/manual/reference/method/sh.updateZoneKeyRange/#sh.updateZoneKeyRange)。 |
| [`sh.disableBalancing()`](https://mongodb.net.cn/manual/reference/method/sh.disableBalancing/#sh.disableBalancing) | 在分片数据库中的单个集合上禁用平衡。不会影响分片群集中其他集合的平衡。 |
| [`sh.enableBalancing()`](https://mongodb.net.cn/manual/reference/method/sh.enableBalancing/#sh.enableBalancing) | 如果先前使用禁用了分片集合平衡器进程[`sh.disableBalancing()`](https://mongodb.net.cn/manual/reference/method/sh.disableBalancing/#sh.disableBalancing)。 |
| [`sh.disableAutoSplit()`](https://mongodb.net.cn/manual/reference/method/sh.disableAutoSplit/#sh.disableAutoSplit) | 禁用分片群集的自动拆分。                                     |
| [`sh.enableAutoSplit()`](https://mongodb.net.cn/manual/reference/method/sh.enableAutoSplit/#sh.enableAutoSplit) | 对分片群集启用自动拆分。                                     |
| [`sh.enableSharding()`](https://mongodb.net.cn/manual/reference/method/sh.enableSharding/#sh.enableSharding) | 在特定数据库上启用分片。                                     |
| [`sh.getBalancerHost()`](https://mongodb.net.cn/manual/reference/method/sh.getBalancerHost/#sh.getBalancerHost) | *自MongoDB 3.4起不推荐使用*                                  |
| [`sh.getBalancerState()`](https://mongodb.net.cn/manual/reference/method/sh.getBalancerState/#sh.getBalancerState) | 返回一个布尔值以报告当前是否启用了[平衡器](https://mongodb.net.cn/manual/reference/glossary/#term-balancer)。 |
| [`sh.removeTagRange()`](https://mongodb.net.cn/manual/reference/method/sh.removeTagRange/#sh.removeTagRange) | 在MongoDB 3.4中，此方法别名为[`sh.removeRangeFromZone()`](https://mongodb.net.cn/manual/reference/method/sh.removeRangeFromZone/#sh.removeRangeFromZone)。 |
| [`sh.removeRangeFromZone()`](https://mongodb.net.cn/manual/reference/method/sh.removeRangeFromZone/#sh.removeRangeFromZone) | 删除一系列分片键和区域之间的关联。支持在分片群集中配置[区域](https://mongodb.net.cn/manual/core/zone-sharding/#zone-sharding)。 |
| [`sh.help()`](https://mongodb.net.cn/manual/reference/method/sh.help/#sh.help) | 返回`sh`方法的帮助文本。                                     |
| [`sh.isBalancerRunning()`](https://mongodb.net.cn/manual/reference/method/sh.isBalancerRunning/#sh.isBalancerRunning) | 返回一个布尔值以报告平衡器进程当前是否正在迁移块。           |
| [`sh.moveChunk()`](https://mongodb.net.cn/manual/reference/method/sh.moveChunk/#sh.moveChunk) | 迁移一个[块](https://mongodb.net.cn/manual/reference/glossary/#term-chunk)的[分片集群](https://mongodb.net.cn/manual/reference/glossary/#term-sharded-cluster)。 |
| [`sh.removeShardTag()`](https://mongodb.net.cn/manual/reference/method/sh.removeShardTag/#sh.removeShardTag) | 在MongoDB 3.4中，此方法别名为[`sh.removeShardFromZone()`](https://mongodb.net.cn/manual/reference/method/sh.removeShardFromZone/#sh.removeShardFromZone)。 |
| [`sh.removeShardFromZone()`](https://mongodb.net.cn/manual/reference/method/sh.removeShardFromZone/#sh.removeShardFromZone) | 删除分片和区域之间的关联。用于管理[区域分片](https://mongodb.net.cn/manual/core/zone-sharding/#zone-sharding)。 |
| [`sh.setBalancerState()`](https://mongodb.net.cn/manual/reference/method/sh.setBalancerState/#sh.setBalancerState) | 启用或禁用在分[片](https://mongodb.net.cn/manual/reference/glossary/#term-shard)之间迁移[块](https://mongodb.net.cn/manual/reference/glossary/#term-chunk)的[平衡器](https://mongodb.net.cn/manual/reference/glossary/#term-balancer)。 |
| [`sh.shardCollection()`](https://mongodb.net.cn/manual/reference/method/sh.shardCollection/#sh.shardCollection) | 为集合启用分片。                                             |
| [`sh.splitAt()`](https://mongodb.net.cn/manual/reference/method/sh.splitAt/#sh.splitAt) | 使用分片[键](https://mongodb.net.cn/manual/reference/glossary/#term-shard-key)的特定值作为分割点将现有的[块](https://mongodb.net.cn/manual/reference/glossary/#term-chunk)分为两个块。 |
| [`sh.splitFind()`](https://mongodb.net.cn/manual/reference/method/sh.splitFind/#sh.splitFind) | 将包含与查询匹配的文档的现有[块](https://mongodb.net.cn/manual/reference/glossary/#term-chunk)分为两个大致相等的块。 |
| [`sh.startBalancer()`](https://mongodb.net.cn/manual/reference/method/sh.startBalancer/#sh.startBalancer) | 启用[平衡器](https://mongodb.net.cn/manual/reference/glossary/#term-balancer)并等待平衡开始。 |
| [`sh.status()`](https://mongodb.net.cn/manual/reference/method/sh.status/#sh.status) | 报告分片[群集](https://mongodb.net.cn/manual/reference/glossary/#term-sharded-cluster)的状态，如[`db.printShardingStatus()`](https://mongodb.net.cn/manual/reference/method/db.printShardingStatus/#db.printShardingStatus)。 |
| [`sh.stopBalancer()`](https://mongodb.net.cn/manual/reference/method/sh.stopBalancer/#sh.stopBalancer) | 禁用[平衡器，](https://mongodb.net.cn/manual/reference/glossary/#term-balancer)并等待任何进行中的平衡回合完成。 |
| [`sh.waitForBalancer()`](https://mongodb.net.cn/manual/reference/method/sh.waitForBalancer/#sh.waitForBalancer) | 内部。等待平衡器状态更改。                                   |
| [`sh.waitForBalancerOff()`](https://mongodb.net.cn/manual/reference/method/sh.waitForBalancerOff/#sh.waitForBalancerOff) | 内部。等待直到平衡器停止运行。                               |
| [`sh.waitForPingChange()`](https://mongodb.net.cn/manual/reference/method/sh.waitForPingChange/#sh.waitForPingChange) | 内部。等待分片[`mongos`](https://mongodb.net.cn/manual/reference/program/mongos/#bin.mongos)群集之一的ping状态更改。 |
| [`sh.updateZoneKeyRange()`](https://mongodb.net.cn/manual/reference/method/sh.updateZoneKeyRange/#sh.updateZoneKeyRange) | 将一系列分片密钥与区域关联。支持在分片群集中配置[区域](https://mongodb.net.cn/manual/core/zone-sharding/#zone-sharding)。 |
| [`convertShardKeyToHashed()`](https://mongodb.net.cn/manual/reference/method/convertShardKeyToHashed/#convertShardKeyToHashed) | 返回输入的哈希值。                                           |



## DB collection 常用方法



## DB collection.find常用方法

find(<predicate>, <projection>) modifiers
	.sort({...})
	.limit(<n>)
	.skip(<n>)
	.batchSize(<n>) - sets the number of docs to return per getMore
	.collation({...})
	.hint({...})
	.readConcern(<level>)
	.readPref(<mode>, <tagset>)
	.count(<applySkipLimit>) - total # of objects matching query. by default ignores skip,limit
	.size() - total # of objects cursor would return, honors skip,limit
	.explain(<verbosity>) - accepted verbosities are {'queryPlanner', 'executionStats', 'allPlansExecution'}
	.min({...})
	.max({...})
	.maxTimeMS(<n>)
	.comment(<comment>)
	.tailable(<isAwaitData>)
	.noCursorTimeout()
	.allowPartialResults()
	.returnKey()
	.showRecordId() - adds a $recordId field to each returned object
	.allowDiskUse() - allow using disk in completing the query

Cursor methods
	.toArray() - iterates through docs and returns an array of the results
	.forEach(<func>)  它将遍历整个游标，并将应用于游标``返回的每个文档。的``期望，其对应于从每个迭代文档的单个参数 
	.map(<func>)
	.hasNext()   它检查游标是否有更多文档要返回。 
	.next()	 返回下一个文档并将光标位置向前移动一个 

​	.close()
​	.objsLeftInBatch() - returns count of docs left in current batch (when exhausted, a new getMore will be issued)
​	.itcount() - iterates through documents and counts them
​	.pretty() - pretty print each document, possibly over multiple lines

