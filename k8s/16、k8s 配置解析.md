## K8s 配置解析

### Pod 配置解析

```yaml
#api的 group名称
apiVersion: v1

#对应apiGroup下的资源
kind: Pod

#元数据
metadata:

  #Pod的名称
  name: String

  #  Pod所属的命名空间
  namespace: String

  #自定义标签列表
  labels:
    - name: String

  #自定义注解列表
  annotations:
    - name: String

  #当前对象的唯一标识,由k8s 自动生成  
  uid: 11

  # 当前对象的内部版本标识服用于让客户端确定对象是否变动
  resourceVersion: 1

  # 自动生成的资源名称，在使用 RS 管理资源时自定生成
  generateName: aa

  # 集群的名称
  clusterName: AA

  # 当前对象删除日期的时间戳
  deletionTimestamp: a

  # 代表当前资源对象是由什么来生成的，比如 由 RS 生成的Pod 下面就会对象RS的资源名称
  ownerReferences:
    - apiVersion: v1
      kind: ReplicationSets
      name: rs-demo
      uid: 111

  # 未知
  initializers:
    pending:
      - name:  A

  #回收策略
  finalizers: []

#Pod中容器的详细定义
spec:

  #Pod中容器的详细定义
  containers:

      #容器的名称
    - name: String

      #容器的镜像名称
      image: String

      #[Always | Never | IfNotPresent]
      # 每次都尝试重新拉取镜像 | 仅使用本地镜像 | 如果本地有镜像则使用，没有则拉取
      # 如果包含以下配置，系统将默认设置imagePullPolicy=Always 如下所述：
      # 1、不设置imagePullPolicy，也未执行镜像的tag
      # 2、不设置 imagePullPolicy，镜像tag 为 latest；
      # 3、启动名为 AlwaysPullImages 的准入控制器（Admission Controller）
      imagePullPolicy: Always

      # 容器的启动命令列表，如果指定则会默认替换打包容器时的 EntryPoint指令，
      #  如果不指定，则使用镜像打包时使用的启动命令
      command: [String] # 【List】

      # 容器的启动命令参数列表，如果指定则会替换 打包镜像时的CMD 命令
      args: [String] # 【List】

      ## 容器的工作目录
      workingDir: String

      #挂载到容器内部的存储卷配置
      volumeMounts: # 【List】

          #引用Pod定义的共享存储卷的名称，需使用volumes[]部分定义的共享存储卷名称
        - name: String #

          # 存储卷在容器内mount的绝对路径，应少于512个字符
          mountPath: Sting

          # 是否为只读模式，默认为读写模式
          readOnly: Boolean
          
          # 设置该 Pod 挂载存储卷所使用的 子路径
          subPath: String

      # 暂时未知
      volumeDevices: []

      # 容器需要暴露的端口号列表
      ports: # 【List】

          #端口的名称
        - name: String  #

          #容器需要监听的端口号
          containerPort: Int

          #容器所在主机需要监听的端口号，默认与containerPort相同。设置hostPort时，同一台宿主机将无法启动该容器的第二份副本
          hostPort: Int

          #端口协议，支持TCP和UDP，默认值为TCP
          protocol: String

      #容器运行前需设置的环境变量列表
      env: # 【List】

          # 环境变量的名称
        - name: String

          # 环境变量的值
          value: String

      # 资源限制和资源请求的设置
      resources:

        # 资源限制的设置
        limits:

          # CPU限制，单位为core数，将用于docker run --cpu-shares参数
          cpu: String

          # 内存限制，单位可以为MB，GB等，将用于docker run --memory参数
          memory: String

        # 资源限制的设置
        requests:

          # cpu请求，单位为core数，容器启动的初始可用数量
          cpu: String

          # 内存请求，单位可以为MB，GB等，容器启动的初始可用数量
          memory: String

      # 对Pod内各容器的存活检测
      # 健康检查的设置，当探测无响应几次之后，系统将自动重启该容器。可以设置的方法包括：exec、httpGet和tcpSocket。
      # 对一个容器只需要设置一种健康检查的方法
      livenessProbe: # 【Object】

        # 对Pod内各容器健康检查的设置，exec方式
        exec: # 【Object】

          # exec方式需要指定的命令或者脚本
          command: [String]

        # 对Pod内各容器健康检查的设置，HTTGet方式。需要指定path、port
        httpGet:
          path: String
          port: Number
          host: String
          scheme: String
          httpHeaders:
            - name: String
              value: String

        # 对Pod内各容器健康检查的设置，tcpSocket方式
        tcpSocket:
          port: Number

        # 容器启动完成后首次延迟探测的时间，单位为s
        initialDelaySeconds: Number

        # 对容器健康检查的探测等待响应的超时时间设置，单位为s，默认值为1s。若超过该超时时间设置，则将认为该容器不健康，会重启该容器。
        timeoutSeconds: Number

        # 对容器健康检查的定期探测时间设置，单位为s，默认10s探测一次
        periodSeconds: Number
        successThreshold: 0
        failureThreshold: 0

      # 容器的安全设置
      securityContext:
        privileged: Boolean

    
     # 容器的就绪检查
      readinessProbe: []
      
      # 容器的生命钩子
      lifecycle:
        
        # 容器停止前的钩子
        preStop: []
        
        # 容器启动后的钩子
        postStart: []
      
      # 容器停止时的消息策略  
      terminationMessagePolicy:   A
    
      # 待定
      terminationMessagePath: A
      
      # 是否开启容器的 tty 终端
      tty:  false
      
      # 环境变量的来源
      envFrom:
        - prefix: A
          # 引用ConfigMap 的 key 名称
          configMapRef:
            name: A
          #引用 secret 的 key 名称
          secretRef:
            name: A  
      
  # Pod的重启策略 一旦终止运行，都将重启 | 终止后kubelet将报告给master，不会重启 | 只有Pod以非零退出码终止时，kubelet才会重启该容器。如果容器正常终止（退出码为0），则不会重启。
  restartPolicy: [Always | Never | OnFailure]

  # 设置Node的Label，以key:value格式指定，Pod将被调度到具有这些Label的Node上
  nodeSelector: object

  #  # 【Object】 pull镜像时使用的Secret名称，以name:secretkey格式指定
  imagePullSecrets:
    - name: String

  # 是否使用主机网络模式，默认值为false。（共享宿主机的网络）
  # 设置为true表示容器使用宿主机网络，不再使用docker网桥，该Pod将无法在同一台宿主机上启动第二个副本
  hostNetwork: Boolean

  # 在该Pod上定义的共享存储卷列表
  volumes: # 【List】

      # 共享存储卷的名称，volume的类型有很多emptyDir，hostPath，secret，nfs，glusterfs，cephfs，configMap
    - name: String #

      # 类型为emptyDir的存储卷，表示与Pod同生命周期的一个临时目录，其值为一个空对象：emptyDir: {}
      emptyDir: {} # 【Object】

      # 类型为hostPath的存储卷，表示挂载Pod所在宿主机的目录
      hostPath:

        # Pod所在主机的目录，将被用于容器中mount的目录
        path: String

      secret: # 【Object】类型为secret的存储卷，表示挂载集群预定义的secret对象到容器内部
        secretName: String
        items:
          - key: String
            path: String
            
      # # 【Object】 类型为configMap的存储卷，表示挂载集群预定义的configMap对象到容器内部      
      configMap: 
        name: String
        items:
          - key: String
            path: String
  
  # 写入容器的 /etc/hosts 的域名 和 对应的 IP 地址
  hostAliases:
    - hostnames:
        - ass
        - asasa
        
    
  # pod 调度策略      
  affinity: []
    
  # 设置pod的污点和 容忍  
  tolerations: []
  
  # 设置dns 的优选策略 默认为 宿主机  | 集群
  dnsPolicy: ClusterFirst   
  
  # 设置容器的安全策略
  securityContext: []
    
  # 未知  
  readinessGates:
    - conditionType: A
  
  # Pod 启动前的 的 InitC 容器
  initContainers:
    - name: A
      
  # 是否共享进程的namespace    
  shareProcessNamespace: false    
  
  # 设置该 pod 要调度到的 node 名称
  nodeName: A
  
  # 未知
  priority: 1
  
  # 未知
  activeDeadlineSeconds: 1
  
  # 未知
  automountServiceAccountToken: A
  
  # 设置该Pod 要使用的ServiceAccount 的名称以及 token ca 证书等
  serviceAccountName: A
  
  # 未知
  enableServiceLinks: A
  
  # 是否使用宿主机的IPC namesapce
  hostIPC: false
  
  # 未知
  hostname: aa
  
  # 设置该Pod 是否使用Host的 进程 namespace
  hostPID: false
  
  # 未知
  priorityClassName: A
  
  # 未知
  schedulerName: A
  
  
  # 未知
  subdomain: A
  
  #未知
  runtimeClassName: A
  
  # 自定义该Pod 使用的 dns 策略
  dnsConfig:
    nameservers:
      - A
    options:
      - A
    searches:
      - A
  
  # 未知
  terminationGracePeriodSeconds: 1
```







### RS 配置解析

### Deployment 配置解析

### StatefulSet 配置解析

### Service 配置解析

```yaml
apiVersion: v1
kind: Service
metadata:
#元数据
  name: string
  #Service名称
  namespace: string
  #命名空间，不指定时默认为default命名空间
  labels:
  #自定义标签属性列表     
    - name: string
  annotations:
  #自定义注解属性列表    
    - name: string
spec:
#详细描述    
  selector: []
  #Label Selector配置，选择具有指定label标签的pod作为管理范围
  type: string
  #service的类型，指定service的访问方式，默认ClusterIP
  #ClusterIP：虚拟的服务ip地址，用于k8s集群内部的pod访问，在Node上kube-porxy通过设置的iptables规则进行转发
  #NodePort：使用宿主机端口，能够访问各Node的外部客户端通过Node的IP和端口就能访问服务器
  #LoadBalancer：使用外部负载均衡器完成到服务器的负载分发，
  #需要在spec.status.loadBalancer字段指定外部负载均衡服务器的IP，并同时定义nodePort和clusterIP用于公有云环境。
  clusterIP: string
  #虚拟服务IP地址，当type=ClusterIP时，如不指定，则系统会自动进行分配，也可以手动指定。当type=loadBalancer，需要指定
  sessionAffinity: string
  #是否支持session，可选值为ClietIP，默认值为空
  #ClientIP表示将同一个客户端(根据客户端IP地址决定)的访问请求都转发到同一个后端Pod
  ports:
  #service需要暴露的端口列表    
  - name: string
    #端口名称
    protocol: string
    #端口协议，支持TCP或UDP，默认TCP
     port: int
    #服务监听的端口号
     targetPort: int
    #需要转发到后端的端口号
     nodePort: int
    #当type=NodePort时，指定映射到物理机的端口号
  status:
  #当type=LoadBalancer时，设置外部负载均衡的地址，用于公有云环境    
    loadBalancer:
    #外部负载均衡器    
      ingress:
      #外部负载均衡器 
      ip: string
      #外部负载均衡器的IP地址
      hostname: string
     #外部负载均衡器的机主机
```

### Handless 配置解析

### Ingress 配置解析

### ConfigMap 配置解析

### Job 配置解析

### CronJob配置解析

### ServiceAccount 配置解析

### NetworkPoliy 配置解析

### CRD 配置解析





### 



### 



### PV配置解析

### PVC配置解析

### StroageClass 配置解析

### 

### ResourceQuota 配置解析

### LimitRanges 配置解析

### Role 配置解析

### ClusterRole 配置解析

### RoleBinding 配置解析

### ClusterRoleBinding配置解析

